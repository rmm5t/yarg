common = Yarg::Dependency.new do |rg|
  rg.delete "public/index.html"
  rg.delete "public/dispatch.*"
end

jquery = Yarg::Dependency.new do |rg|
  rg.delete "public/javascripts/*.js"
  rg.download "http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js", "public/javascripts", "jquery.min.js"
end

task :default => :rails

Yarg::Rails.new :depends => [common, jquery] do |rg|
  rg.scm :git, :freeze_method => :submodules # ?????
  rg.template "~/.yarg.d/default"
  rg.delete "public/index.html"
  rg.delete "public/dispatch.*"
  rg.plugin "git://github.com/thoughtbot/shoulda.git"
  rg.plugin "git://github.com/nex3/haml.git"
  rg.freeze :version => :edge  # :edge, :gems, REVISION,
end

-------------------------

dependency :common do
  delete "public/index.html"
  delete "public/dispatch.*"
end

dependency :jquery do
  delete "public/javascripts/*.js"
  download "http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js", "public/javascripts", "jquery.min.js"
end

rails :default => [:common, :jquery, :git, :submodules] do
  template "~/.yarg.d/default"
  freeze :version => :edge
  plugin "git://github.com/thoughtbot/shoulda.git"
  plugin "git://github.com/nex3/haml.git"
end

rails :test1 do
  plugin "adsfsdf"
end


-------------------------

delete "public/index.html"
delete "public/dispatch.*"
delete "public/javascripts/*.js"
download "http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js", "public/javascripts"
template "~/.yarb.d/default"

git.init

freeze :method => :submodule
plugin git://github.com/thoughtbot/shoulda.git, :method => :submodule
plugin git://github.com/nex3/haml.git, :method => :submodule

git.add
git.commit


-------------------------
#!/usr/bin/env ruby

def sh(command)
  puts command
  system(command)
end

project_name = ARGV[0]

sh "rails -d mysql #{project_name}"
Dir.chdir project_name

sh "rm public/index.html"
sh "rm public/dispatch.*"
sh "rm public/javascripts/*.js"
sh "touch public/javascripts/application.js"
sh "mv config/database.yml config/database.yml.tpl"

sh "cd public/javascripts; wget http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js; cd ../../"

sh "mkdir public/stylesheets/sass"
sh "touch public/stylesheets/application.sass"

# sh "git submodule add git://github.com/rails/rails.git vendor/plugins/rails"
# sh "git submodule add git://github.com/thoughtbot/shoulda.git vendor/plugins/shoulda"
# sh "git submodule add git://github.com/nex3/haml.git vendor/plugins/haml"
# sh "git submodule add git://github.com/rmm5t/strip_attributes.git vendor/plugins/strip_attributes"


